<!DOCTYPE html><html lang="en" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0,viewport-fit=cover"><title>二手房价格数据分析与预测 | Kangrui Yu's Blog</title><meta name="author" content="Kangrui Yu"><meta name="copyright" content="Kangrui Yu"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="二手房价格数据分析与预测目录 数据读取与查看 数据预处理 数据可视化 特征分布可视化 二手房单价可能的影响因素 低楼层二手房的特别之处及其单价高的原因   训练集测试集划分 计算训练集中各特征变量与目标变量之间的相关性 线性回归预测方法 训练模型 评估模型 用新的数据来预测输出   套索回归预测方法 对特征值进行标准化 训练模型 评估模型 用新的数据来预测输出   岭回归预测方法 对特征值进行标准">
<meta property="og:type" content="article">
<meta property="og:title" content="二手房价格数据分析与预测">
<meta property="og:url" content="http://example.com/2024/10/02/%E4%BA%8C%E6%89%8B%E6%88%BF%E4%BB%B7%E6%A0%BC%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E4%B8%8E%E9%A2%84%E6%B5%8B/index.html">
<meta property="og:site_name" content="Kangrui Yu&#39;s Blog">
<meta property="og:description" content="二手房价格数据分析与预测目录 数据读取与查看 数据预处理 数据可视化 特征分布可视化 二手房单价可能的影响因素 低楼层二手房的特别之处及其单价高的原因   训练集测试集划分 计算训练集中各特征变量与目标变量之间的相关性 线性回归预测方法 训练模型 评估模型 用新的数据来预测输出   套索回归预测方法 对特征值进行标准化 训练模型 评估模型 用新的数据来预测输出   岭回归预测方法 对特征值进行标准">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="http://example.com/img/avatar.jpg">
<meta property="article:published_time" content="2024-10-01T16:00:00.000Z">
<meta property="article:modified_time" content="2024-10-05T02:41:54.167Z">
<meta property="article:author" content="Kangrui Yu">
<meta property="article:tag" content="数据分析">
<meta property="article:tag" content="机器学习">
<meta property="article:tag" content="Python">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://example.com/img/avatar.jpg"><link rel="shortcut icon" href="/img/icon.png"><link rel="canonical" href="http://example.com/2024/10/02/%E4%BA%8C%E6%89%8B%E6%88%BF%E4%BB%B7%E6%A0%BC%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E4%B8%8E%E9%A2%84%E6%B5%8B/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css?v=4.13.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.5.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: 'Copy Successful',
    error: 'Copy Error',
    noSupport: 'Browser Not Supported'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '',
  dateSuffix: {
    just: 'Just now',
    min: 'minutes ago',
    hour: 'hours ago',
    day: 'days ago',
    month: 'months ago'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  infinitegrid: {
    js: 'https://cdn.jsdelivr.net/npm/@egjs/infinitegrid@4.11.1/dist/infinitegrid.min.js',
    buttonText: 'Load More'
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  },
  autoDarkmode: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: '二手房价格数据分析与预测',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2024-10-05 10:41:54'
}</script><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
        if (t === 'dark') activateDarkMode()
        else if (t === 'light') activateLightMode()
      
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">2</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">3</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">1</div></a></div><hr class="custom-hr"/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="Kangrui Yu's Blog"><span class="site-name">Kangrui Yu's Blog</span></a></span><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> Archives</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> Tags</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> Categories</span></a></div><div class="menus_item"><a class="site-page group" href="javascript:void(0);"><i class="fa-fw fas fa-list"></i><span> List</span><i class="fas fa-chevron-down"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/music/"><i class="fa-fw fas fa-music"></i><span> Music</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> Movie</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> Link</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> About</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">二手房价格数据分析与预测</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">Created</span><time class="post-meta-date-created" datetime="2024-10-01T16:00:00.000Z" title="Created 2024-10-02 00:00:00">2024-10-02</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">Updated</span><time class="post-meta-date-updated" datetime="2024-10-05T02:41:54.167Z" title="Updated 2024-10-05 10:41:54">2024-10-05</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/">数据分析</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="二手房价格数据分析与预测"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">Post Views:</span><span id="busuanzi_value_page_pv"><i class="fa-solid fa-spinner fa-spin"></i></span></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="二手房价格数据分析与预测"><a href="#二手房价格数据分析与预测" class="headerlink" title="二手房价格数据分析与预测"></a>二手房价格数据分析与预测</h1><h2 id="目录"><a href="#目录" class="headerlink" title="目录"></a>目录</h2><ol>
<li><a href="#1">数据读取与查看</a></li>
<li><a href="#2">数据预处理</a></li>
<li><a href="#3">数据可视化</a><ul>
<li><a href="#3.1">特征分布可视化</a></li>
<li><a href="#3.2">二手房单价可能的影响因素</a></li>
<li><a href="#3.3">低楼层二手房的特别之处及其单价高的原因</a></li>
</ul>
</li>
<li><a href="#4">训练集测试集划分</a></li>
<li><a href="#5">计算训练集中各特征变量与目标变量之间的相关性</a></li>
<li><a href="#6">线性回归预测方法</a><ul>
<li><a href="#6.1">训练模型</a></li>
<li><a href="#6.2">评估模型</a></li>
<li><a href="#6.3">用新的数据来预测输出</a></li>
</ul>
</li>
<li><a href="#7">套索回归预测方法</a><ul>
<li><a href="#7.1">对特征值进行标准化</a></li>
<li><a href="#7.2">训练模型</a></li>
<li><a href="#7.3">评估模型</a></li>
<li><a href="#7.4">用新的数据来预测输出</a></li>
</ul>
</li>
<li><a href="#8">岭回归预测方法</a><ul>
<li><a href="#8.1">对特征值进行标准化</a></li>
<li><a href="#8.2">训练模型</a></li>
<li><a href="#8.3">评估模型</a></li>
<li><a href="#8.4">用新的数据来预测输出</a></li>
</ul>
</li>
<li><a href="#9">总结</a></li>
</ol>
<p>随着社会的不断发展与进步，年轻人越来越关心二手房房价。为更好解决年轻人对二手房房价的相关问题，本实验依据二手房相关的各项特征来进行二手房房价预测。</p>
<p>本实验基于二手房数据集来进行模型构建与评估。首先将样本数据划分训练集和数据集两部分，然后用训练集用来训练模型，并用测试集进行测试，最后根据预测的结果对模型的准确性进行评估。</p>
<div id="1"></div>

<h1 id="1-数据读取与查看"><a href="#1-数据读取与查看" class="headerlink" title="1. 数据读取与查看"></a>1. 数据读取与查看</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入需要用到的库</span></span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">import</span> matplotlib</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt </span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> roc_curve, auc, roc_auc_score</span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LogisticRegression</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> classification_report, accuracy_score, precision_recall_curve, confusion_matrix</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"><span class="keyword">from</span> matplotlib.font_manager <span class="keyword">import</span> FontProperties</span><br><span class="line"><span class="keyword">from</span> pyecharts.charts <span class="keyword">import</span> Pie, Bar, HeatMap, Scatter</span><br><span class="line"><span class="keyword">from</span> pyecharts <span class="keyword">import</span> options <span class="keyword">as</span> opts</span><br><span class="line"><span class="keyword">from</span> pyecharts.<span class="built_in">globals</span> <span class="keyword">import</span> ThemeType</span><br><span class="line"><span class="keyword">import</span> seaborn <span class="keyword">as</span> sns</span><br><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> matplotlib.font_manager <span class="keyword">as</span> fm</span><br><span class="line"><span class="keyword">import</span> warnings</span><br><span class="line">warnings.filterwarnings(<span class="string">&#x27;ignore&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 读入数据集</span></span><br><span class="line">data = pd.read_csv(<span class="string">&#x27;/data/bigfiles/二手房数据.csv&#x27;</span>, encoding = <span class="string">&#x27;gbk&#x27;</span>)</span><br><span class="line">data.head(<span class="number">10</span>)</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unnamed: 0</th>
      <th>小区名字</th>
      <th>总价</th>
      <th>户型</th>
      <th>建筑面积</th>
      <th>朝向</th>
      <th>楼层</th>
      <th>装修</th>
      <th>区域</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>中天北湾新城</td>
      <td>89万</td>
      <td>2室2厅1卫</td>
      <td>89平米</td>
      <td>南北</td>
      <td>低层</td>
      <td>毛坯</td>
      <td>高新</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>桦林苑</td>
      <td>99.8万</td>
      <td>3室2厅1卫</td>
      <td>143平米</td>
      <td>南北</td>
      <td>中层</td>
      <td>毛坯</td>
      <td>净月</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>嘉柏湾</td>
      <td>32万</td>
      <td>1室1厅1卫</td>
      <td>43.3平米</td>
      <td>南</td>
      <td>高层</td>
      <td>精装修</td>
      <td>经开</td>
    </tr>
    <tr>
      <th>3</th>
      <td>2</td>
      <td>嘉柏湾</td>
      <td>32万</td>
      <td>1室1厅1卫</td>
      <td>43.3平米</td>
      <td>南</td>
      <td>高层</td>
      <td>精装修</td>
      <td>经开</td>
    </tr>
    <tr>
      <th>4</th>
      <td>3</td>
      <td>中环12区</td>
      <td>51.5万</td>
      <td>2室1厅1卫</td>
      <td>57平米</td>
      <td>南北</td>
      <td>高层</td>
      <td>精装修</td>
      <td>南关</td>
    </tr>
    <tr>
      <th>5</th>
      <td>4</td>
      <td>昊源高格蓝湾</td>
      <td>210万</td>
      <td>3室2厅2卫</td>
      <td>160.8平米</td>
      <td>南北</td>
      <td>高层</td>
      <td>精装修</td>
      <td>二道</td>
    </tr>
    <tr>
      <th>6</th>
      <td>5</td>
      <td>金色橄榄城</td>
      <td>118万</td>
      <td>3室1厅1卫</td>
      <td>200平米</td>
      <td>南北</td>
      <td>NaN</td>
      <td>简装修</td>
      <td>二道</td>
    </tr>
    <tr>
      <th>7</th>
      <td>6</td>
      <td>新星宇和润</td>
      <td>84万</td>
      <td>2室1厅1卫</td>
      <td>75.06平米</td>
      <td>南北</td>
      <td>高层</td>
      <td>精装修</td>
      <td>南关</td>
    </tr>
    <tr>
      <th>8</th>
      <td>7</td>
      <td>长电紫盈花城</td>
      <td>96万</td>
      <td>2室2厅1卫</td>
      <td>90平米</td>
      <td>南北</td>
      <td>中层</td>
      <td>精装修</td>
      <td>二道</td>
    </tr>
    <tr>
      <th>9</th>
      <td>8</td>
      <td>万科上东区</td>
      <td>107万</td>
      <td>3室2厅1卫</td>
      <td>99.44平米</td>
      <td>南</td>
      <td>中层</td>
      <td>精装修</td>
      <td>二道</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 数据集的大小</span></span><br><span class="line">data.shape</span><br></pre></td></tr></table></figure>




<pre><code>(2593, 9)
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 数据集的基本信息</span></span><br><span class="line">data.info()</span><br></pre></td></tr></table></figure>

<pre><code>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 2593 entries, 0 to 2592
Data columns (total 9 columns):
Unnamed: 0    2593 non-null int64
小区名字          2561 non-null object
总价            2561 non-null object
户型            2561 non-null object
建筑面积          2561 non-null object
朝向            2556 non-null object
楼层            2553 non-null object
装修            2561 non-null object
区域            2561 non-null object
dtypes: int64(1), object(8)
memory usage: 182.4+ KB
</code></pre>
<div id="2"></div>

<h1 id="2-数据预处理"><a href="#2-数据预处理" class="headerlink" title="2. 数据预处理"></a>2. 数据预处理</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看数据是否有空值</span></span><br><span class="line">data.isnull().<span class="built_in">sum</span>()</span><br></pre></td></tr></table></figure>




<pre><code>Unnamed: 0     0
小区名字          32
总价            32
户型            32
建筑面积          32
朝向            37
楼层            40
装修            32
区域            32
dtype: int64
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">#查看数据是否有重复值</span></span><br><span class="line">data.duplicated().<span class="built_in">sum</span>()</span><br></pre></td></tr></table></figure>




<pre><code>23
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删除包含空值的行</span></span><br><span class="line">data.dropna(inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 确认空值已被删除</span></span><br><span class="line">data.isnull().<span class="built_in">sum</span>()</span><br></pre></td></tr></table></figure>




<pre><code>Unnamed: 0    0
小区名字          0
总价            0
户型            0
建筑面积          0
朝向            0
楼层            0
装修            0
区域            0
dtype: int64
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 删除重复的数据记录</span></span><br><span class="line">data.drop_duplicates(inplace=<span class="literal">True</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 确认重复记录已被删除</span></span><br><span class="line">data.duplicated().<span class="built_in">sum</span>()</span><br></pre></td></tr></table></figure>




<pre><code>0
</code></pre>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 去除 &#x27;万&#x27; 并转换为浮点数</span></span><br><span class="line">data[<span class="string">&#x27;总价&#x27;</span>] = data[<span class="string">&#x27;总价&#x27;</span>].astype(<span class="built_in">str</span>).<span class="built_in">str</span>.rstrip(<span class="string">&#x27;万&#x27;</span>).astype(<span class="built_in">float</span>) * <span class="number">10000</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 去除 &#x27;平米&#x27; 并转换为浮点数</span></span><br><span class="line">data[<span class="string">&#x27;建筑面积&#x27;</span>] = data[<span class="string">&#x27;建筑面积&#x27;</span>].astype(<span class="built_in">str</span>).<span class="built_in">str</span>.rstrip(<span class="string">&#x27;平米&#x27;</span>).astype(<span class="built_in">float</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 计算 &#x27;单价&#x27; 并将其转换为整数。使用round()函数确保四舍五入，这样避免了计算结果为负数的情况</span></span><br><span class="line">data[<span class="string">&#x27;单价&#x27;</span>] = (data[<span class="string">&#x27;总价&#x27;</span>] / data[<span class="string">&#x27;建筑面积&#x27;</span>]).<span class="built_in">round</span>().astype(<span class="built_in">int</span>)</span><br><span class="line"></span><br><span class="line">data.head(<span class="number">10</span>)</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unnamed: 0</th>
      <th>小区名字</th>
      <th>总价</th>
      <th>户型</th>
      <th>建筑面积</th>
      <th>朝向</th>
      <th>楼层</th>
      <th>装修</th>
      <th>区域</th>
      <th>单价</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>中天北湾新城</td>
      <td>890000.0</td>
      <td>2室2厅1卫</td>
      <td>89.00</td>
      <td>南北</td>
      <td>低层</td>
      <td>毛坯</td>
      <td>高新</td>
      <td>10000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>桦林苑</td>
      <td>998000.0</td>
      <td>3室2厅1卫</td>
      <td>143.00</td>
      <td>南北</td>
      <td>中层</td>
      <td>毛坯</td>
      <td>净月</td>
      <td>6979</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>嘉柏湾</td>
      <td>320000.0</td>
      <td>1室1厅1卫</td>
      <td>43.30</td>
      <td>南</td>
      <td>高层</td>
      <td>精装修</td>
      <td>经开</td>
      <td>7390</td>
    </tr>
    <tr>
      <th>4</th>
      <td>3</td>
      <td>中环12区</td>
      <td>515000.0</td>
      <td>2室1厅1卫</td>
      <td>57.00</td>
      <td>南北</td>
      <td>高层</td>
      <td>精装修</td>
      <td>南关</td>
      <td>9035</td>
    </tr>
    <tr>
      <th>5</th>
      <td>4</td>
      <td>昊源高格蓝湾</td>
      <td>2100000.0</td>
      <td>3室2厅2卫</td>
      <td>160.80</td>
      <td>南北</td>
      <td>高层</td>
      <td>精装修</td>
      <td>二道</td>
      <td>13060</td>
    </tr>
    <tr>
      <th>7</th>
      <td>6</td>
      <td>新星宇和润</td>
      <td>840000.0</td>
      <td>2室1厅1卫</td>
      <td>75.06</td>
      <td>南北</td>
      <td>高层</td>
      <td>精装修</td>
      <td>南关</td>
      <td>11191</td>
    </tr>
    <tr>
      <th>8</th>
      <td>7</td>
      <td>长电紫盈花城</td>
      <td>960000.0</td>
      <td>2室2厅1卫</td>
      <td>90.00</td>
      <td>南北</td>
      <td>中层</td>
      <td>精装修</td>
      <td>二道</td>
      <td>10667</td>
    </tr>
    <tr>
      <th>9</th>
      <td>8</td>
      <td>万科上东区</td>
      <td>1070000.0</td>
      <td>3室2厅1卫</td>
      <td>99.44</td>
      <td>南</td>
      <td>中层</td>
      <td>精装修</td>
      <td>二道</td>
      <td>10760</td>
    </tr>
    <tr>
      <th>10</th>
      <td>9</td>
      <td>中海莱茵东郡</td>
      <td>2050000.0</td>
      <td>3室2厅2卫</td>
      <td>156.00</td>
      <td>南北</td>
      <td>高层</td>
      <td>精装修</td>
      <td>净月</td>
      <td>13141</td>
    </tr>
    <tr>
      <th>11</th>
      <td>10</td>
      <td>诺睿德国际商务广场</td>
      <td>1050000.0</td>
      <td>3室2厅1卫</td>
      <td>92.70</td>
      <td>南北</td>
      <td>中层</td>
      <td>精装修</td>
      <td>净月</td>
      <td>11327</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 新增卧室数量、客厅数量、卫生间数量这三列</span></span><br><span class="line">data[<span class="string">&#x27;卧室数量&#x27;</span>] = data[<span class="string">&#x27;户型&#x27;</span>].<span class="built_in">str</span>.extract(<span class="string">r&#x27;(\d+)室&#x27;</span>).fillna(<span class="number">0</span>).astype(<span class="built_in">int</span>) <span class="comment"># 用0替换缺失值，并转换为整数类型。避免有些不包含卧室、客厅或卫生间数量的条目导致无法将NaN转换为整数的错误。</span></span><br><span class="line">data[<span class="string">&#x27;客厅数量&#x27;</span>] = data[<span class="string">&#x27;户型&#x27;</span>].<span class="built_in">str</span>.extract(<span class="string">r&#x27;(\d+)厅&#x27;</span>).fillna(<span class="number">0</span>).astype(<span class="built_in">int</span>)</span><br><span class="line">data[<span class="string">&#x27;卫生间数量&#x27;</span>] = data[<span class="string">&#x27;户型&#x27;</span>].<span class="built_in">str</span>.extract(<span class="string">r&#x27;(\d+)卫&#x27;</span>).fillna(<span class="number">0</span>).astype(<span class="built_in">int</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">#新增总房间数量列</span></span><br><span class="line">data[<span class="string">&#x27;总房间数量&#x27;</span>] = data[<span class="string">&#x27;卧室数量&#x27;</span>] + data[<span class="string">&#x27;客厅数量&#x27;</span>] + data[<span class="string">&#x27;卫生间数量&#x27;</span>]</span><br><span class="line">data = data[data[<span class="string">&#x27;建筑面积&#x27;</span>] &lt;= <span class="number">500</span>]</span><br><span class="line">data.head(<span class="number">10</span>)</span><br></pre></td></tr></table></figure>




<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

<pre><code>.dataframe tbody tr th &#123;
    vertical-align: top;
&#125;

.dataframe thead th &#123;
    text-align: right;
&#125;
</code></pre>
<p></style></p>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Unnamed: 0</th>
      <th>小区名字</th>
      <th>总价</th>
      <th>户型</th>
      <th>建筑面积</th>
      <th>朝向</th>
      <th>楼层</th>
      <th>装修</th>
      <th>区域</th>
      <th>单价</th>
      <th>卧室数量</th>
      <th>客厅数量</th>
      <th>卫生间数量</th>
      <th>总房间数量</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0</td>
      <td>中天北湾新城</td>
      <td>890000.0</td>
      <td>2室2厅1卫</td>
      <td>89.00</td>
      <td>南北</td>
      <td>低层</td>
      <td>毛坯</td>
      <td>高新</td>
      <td>10000</td>
      <td>2</td>
      <td>2</td>
      <td>1</td>
      <td>5</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>桦林苑</td>
      <td>998000.0</td>
      <td>3室2厅1卫</td>
      <td>143.00</td>
      <td>南北</td>
      <td>中层</td>
      <td>毛坯</td>
      <td>净月</td>
      <td>6979</td>
      <td>3</td>
      <td>2</td>
      <td>1</td>
      <td>6</td>
    </tr>
    <tr>
      <th>2</th>
      <td>2</td>
      <td>嘉柏湾</td>
      <td>320000.0</td>
      <td>1室1厅1卫</td>
      <td>43.30</td>
      <td>南</td>
      <td>高层</td>
      <td>精装修</td>
      <td>经开</td>
      <td>7390</td>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>3</td>
    </tr>
    <tr>
      <th>4</th>
      <td>3</td>
      <td>中环12区</td>
      <td>515000.0</td>
      <td>2室1厅1卫</td>
      <td>57.00</td>
      <td>南北</td>
      <td>高层</td>
      <td>精装修</td>
      <td>南关</td>
      <td>9035</td>
      <td>2</td>
      <td>1</td>
      <td>1</td>
      <td>4</td>
    </tr>
    <tr>
      <th>5</th>
      <td>4</td>
      <td>昊源高格蓝湾</td>
      <td>2100000.0</td>
      <td>3室2厅2卫</td>
      <td>160.80</td>
      <td>南北</td>
      <td>高层</td>
      <td>精装修</td>
      <td>二道</td>
      <td>13060</td>
      <td>3</td>
      <td>2</td>
      <td>2</td>
      <td>7</td>
    </tr>
    <tr>
      <th>7</th>
      <td>6</td>
      <td>新星宇和润</td>
      <td>840000.0</td>
      <td>2室1厅1卫</td>
      <td>75.06</td>
      <td>南北</td>
      <td>高层</td>
      <td>精装修</td>
      <td>南关</td>
      <td>11191</td>
      <td>2</td>
      <td>1</td>
      <td>1</td>
      <td>4</td>
    </tr>
    <tr>
      <th>8</th>
      <td>7</td>
      <td>长电紫盈花城</td>
      <td>960000.0</td>
      <td>2室2厅1卫</td>
      <td>90.00</td>
      <td>南北</td>
      <td>中层</td>
      <td>精装修</td>
      <td>二道</td>
      <td>10667</td>
      <td>2</td>
      <td>2</td>
      <td>1</td>
      <td>5</td>
    </tr>
    <tr>
      <th>9</th>
      <td>8</td>
      <td>万科上东区</td>
      <td>1070000.0</td>
      <td>3室2厅1卫</td>
      <td>99.44</td>
      <td>南</td>
      <td>中层</td>
      <td>精装修</td>
      <td>二道</td>
      <td>10760</td>
      <td>3</td>
      <td>2</td>
      <td>1</td>
      <td>6</td>
    </tr>
    <tr>
      <th>10</th>
      <td>9</td>
      <td>中海莱茵东郡</td>
      <td>2050000.0</td>
      <td>3室2厅2卫</td>
      <td>156.00</td>
      <td>南北</td>
      <td>高层</td>
      <td>精装修</td>
      <td>净月</td>
      <td>13141</td>
      <td>3</td>
      <td>2</td>
      <td>2</td>
      <td>7</td>
    </tr>
    <tr>
      <th>11</th>
      <td>10</td>
      <td>诺睿德国际商务广场</td>
      <td>1050000.0</td>
      <td>3室2厅1卫</td>
      <td>92.70</td>
      <td>南北</td>
      <td>中层</td>
      <td>精装修</td>
      <td>净月</td>
      <td>11327</td>
      <td>3</td>
      <td>2</td>
      <td>1</td>
      <td>6</td>
    </tr>
  </tbody>
</table>
</div>




<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">data.info()</span><br></pre></td></tr></table></figure>

<pre><code>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
Int64Index: 2531 entries, 0 to 2592
Data columns (total 14 columns):
Unnamed: 0    2531 non-null int64
小区名字          2531 non-null object
总价            2531 non-null float64
户型            2531 non-null object
建筑面积          2531 non-null float64
朝向            2531 non-null object
楼层            2531 non-null object
装修            2531 non-null object
区域            2531 non-null object
单价            2531 non-null int64
卧室数量          2531 non-null int64
客厅数量          2531 non-null int64
卫生间数量         2531 non-null int64
总房间数量         2531 non-null int64
dtypes: float64(2), int64(6), object(6)
memory usage: 296.6+ KB
</code></pre>
<div id="3"></div>

<h1 id="3-数据可视化"><a href="#3-数据可视化" class="headerlink" title="3. 数据可视化"></a>3. 数据可视化</h1><div id="3.1"></div>

<h2 id="3-1-特征分布可视化"><a href="#3-1-特征分布可视化" class="headerlink" title="3.1 特征分布可视化"></a>3.1 特征分布可视化</h2><p>查看二手房各特征的相关分布情况：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置中文字体</span></span><br><span class="line">font = FontProperties(fname=<span class="string">r&quot;/data/bigfiles/STFANGSO.TTF&quot;</span>, size=<span class="number">12</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建子图</span></span><br><span class="line">fig, axs = plt.subplots(<span class="number">2</span>, <span class="number">2</span>, figsize=(<span class="number">16</span>, <span class="number">9</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制直方图</span></span><br><span class="line">axs[<span class="number">0</span>, <span class="number">0</span>].hist(data[<span class="string">&#x27;单价&#x27;</span>], bins=<span class="number">10</span>)</span><br><span class="line">axs[<span class="number">0</span>, <span class="number">0</span>].set_title(<span class="string">&#x27;二手房单价分布直方图&#x27;</span>, fontproperties=font)</span><br><span class="line">axs[<span class="number">0</span>, <span class="number">0</span>].set_xlabel(<span class="string">&#x27;单价（元/平方米）&#x27;</span>, fontproperties=font)</span><br><span class="line">axs[<span class="number">0</span>, <span class="number">0</span>].set_ylabel(<span class="string">&#x27;频率&#x27;</span>, fontproperties=font)</span><br><span class="line">axs[<span class="number">0</span>, <span class="number">0</span>].text(<span class="number">0.5</span>, -<span class="number">0.2</span>, <span class="string">&#x27;图1&#x27;</span>, horizontalalignment=<span class="string">&#x27;center&#x27;</span>, verticalalignment=<span class="string">&#x27;center&#x27;</span>, transform=axs[<span class="number">0</span>, <span class="number">0</span>].transAxes)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置中文显示</span></span><br><span class="line">plt.rcParams[<span class="string">&#x27;font.sans-serif&#x27;</span>] = [<span class="string">&#x27;SimHei&#x27;</span>]</span><br><span class="line">plt.rcParams[<span class="string">&#x27;axes.unicode_minus&#x27;</span>] = <span class="literal">False</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制建筑面积的核密度估计图</span></span><br><span class="line">sns.kdeplot(data[<span class="string">&#x27;建筑面积&#x27;</span>], shade=<span class="literal">True</span>, color=<span class="string">&#x27;blue&#x27;</span>, ax=axs[<span class="number">0</span>, <span class="number">1</span>])</span><br><span class="line">axs[<span class="number">0</span>, <span class="number">1</span>].set_title(<span class="string">&#x27;二手房建筑面积核密度估计图 &#x27;</span>)</span><br><span class="line">axs[<span class="number">0</span>, <span class="number">1</span>].set_xlabel(<span class="string">&#x27;建筑面积（平方米）&#x27;</span>)</span><br><span class="line">axs[<span class="number">0</span>, <span class="number">1</span>].set_ylabel(<span class="string">&#x27;密度&#x27;</span>)</span><br><span class="line">axs[<span class="number">0</span>, <span class="number">1</span>].text(<span class="number">0.5</span>, -<span class="number">0.2</span>, <span class="string">&#x27;图2&#x27;</span>, horizontalalignment=<span class="string">&#x27;center&#x27;</span>, verticalalignment=<span class="string">&#x27;center&#x27;</span>, transform=axs[<span class="number">0</span>, <span class="number">1</span>].transAxes)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 统计每个区域的二手房数量</span></span><br><span class="line">region_counts = data[<span class="string">&#x27;区域&#x27;</span>].value_counts()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 画饼图</span></span><br><span class="line">axs[<span class="number">1</span>, <span class="number">0</span>].pie(region_counts, labels=region_counts.index, autopct=<span class="string">&#x27;%1.1f%%&#x27;</span>, startangle=<span class="number">140</span>)</span><br><span class="line">axs[<span class="number">1</span>, <span class="number">0</span>].set_title(<span class="string">&#x27;各区域二手房数量占比饼图&#x27;</span>)</span><br><span class="line">axs[<span class="number">1</span>, <span class="number">0</span>].text(<span class="number">0.5</span>, -<span class="number">0.2</span>, <span class="string">&#x27;图3&#x27;</span>, horizontalalignment=<span class="string">&#x27;center&#x27;</span>, verticalalignment=<span class="string">&#x27;center&#x27;</span>, transform=axs[<span class="number">1</span>, <span class="number">0</span>].transAxes)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建提琴图</span></span><br><span class="line">sns.violinplot(x=<span class="string">&quot;区域&quot;</span>, y=<span class="string">&quot;单价&quot;</span>, data=data, palette=<span class="string">&quot;Set2&quot;</span>, ax=axs[<span class="number">1</span>, <span class="number">1</span>])</span><br><span class="line">axs[<span class="number">1</span>, <span class="number">1</span>].set_title(<span class="string">&quot;各区域二手房单价分布小提琴图&quot;</span>)</span><br><span class="line">axs[<span class="number">1</span>, <span class="number">1</span>].set_xlabel(<span class="string">&quot;区域&quot;</span>)</span><br><span class="line">axs[<span class="number">1</span>, <span class="number">1</span>].set_ylabel(<span class="string">&quot;单价&quot;</span>)</span><br><span class="line">axs[<span class="number">1</span>, <span class="number">1</span>].text(<span class="number">0.5</span>, -<span class="number">0.2</span>, <span class="string">&#x27;图4&#x27;</span>, horizontalalignment=<span class="string">&#x27;center&#x27;</span>, verticalalignment=<span class="string">&#x27;center&#x27;</span>, transform=axs[<span class="number">1</span>, <span class="number">1</span>].transAxes)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 调整子图之间的间距</span></span><br><span class="line">plt.tight_layout()</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/images/01_files/01_19_0.png" alt="png"></p>
<p>由图1、图2得，二手房的单价大多集中在1万元&#x2F;平方米左右、建筑面积大多集中在100平方米左右。</p>
<p>由图3得，各区域二手房数量排名前三的区域是：二道、高新、经开，且接近一半的二手房集中在这3个区域内。</p>
<p>由图4得，高新、净月、经开、南关、朝阳区域的二手房单价分布跨度较大，其他区域跨度较小。其中朝阳区域的二手房单价分布最不均匀，且单价最高和最低的二手房也在朝阳区域内。</p>
<div id="3.2"></div>

<h2 id="3-2-二手房单价可能的影响因素"><a href="#3-2-二手房单价可能的影响因素" class="headerlink" title="3.2 二手房单价可能的影响因素"></a>3.2 二手房单价可能的影响因素</h2><p>探究二手房建筑面积和单价的联系：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 提取数据</span></span><br><span class="line">x_data = data[<span class="string">&#x27;单价&#x27;</span>]</span><br><span class="line">y_data = data[<span class="string">&#x27;建筑面积&#x27;</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 排除异常点</span></span><br><span class="line">filtered_data = data[data[<span class="string">&#x27;建筑面积&#x27;</span>] &lt; <span class="number">500</span>]</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建散点图</span></span><br><span class="line">plt.figure(figsize=(<span class="number">16</span>, <span class="number">9</span>))</span><br><span class="line">plt.scatter(filtered_data[<span class="string">&#x27;单价&#x27;</span>], filtered_data[<span class="string">&#x27;建筑面积&#x27;</span>], label=<span class="string">&quot;房价-建筑面积&quot;</span>, alpha=<span class="number">0.6</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用polyfit函数拟合一条回归线</span></span><br><span class="line">coefficients = np.polyfit(filtered_data[<span class="string">&#x27;单价&#x27;</span>], filtered_data[<span class="string">&#x27;建筑面积&#x27;</span>], <span class="number">1</span>)</span><br><span class="line">polynomial = np.poly1d(coefficients)</span><br><span class="line">x_values = np.linspace(<span class="built_in">min</span>(filtered_data[<span class="string">&#x27;单价&#x27;</span>]), <span class="built_in">max</span>(filtered_data[<span class="string">&#x27;单价&#x27;</span>]), <span class="number">100</span>)</span><br><span class="line">y_values = polynomial(x_values)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 绘制回归线</span></span><br><span class="line">plt.plot(x_values, y_values, label=<span class="string">&quot;回归线&quot;</span>, color=<span class="string">&#x27;red&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置图表选项</span></span><br><span class="line">plt.title(<span class="string">&quot;二手房单价分布散点图&quot;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&quot;单价&quot;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&quot;建筑面积&quot;</span>)</span><br><span class="line">plt.grid(<span class="literal">True</span>)</span><br><span class="line">plt.legend()</span><br><span class="line"></span><br><span class="line">plt.show()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 计算回归线的斜率</span></span><br><span class="line">slope = coefficients[<span class="number">0</span>]</span><br><span class="line">slope</span><br></pre></td></tr></table></figure>


<p><img src="/images/01_files/01_23_0.png" alt="png"></p>
<pre><code>0.0030767261174034174
</code></pre>
<p>回归线的斜率接近0，可见探究二手房建筑面积和单价并没有实际联系。</p>
<p>探究二手房装修程度和单价的联系：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 按朝向分组并计算平均单价</span></span><br><span class="line">average_price_by_orientation = data.groupby(<span class="string">&#x27;装修&#x27;</span>)[<span class="string">&#x27;单价&#x27;</span>].mean()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建柱状图</span></span><br><span class="line">plt.figure(figsize=(<span class="number">16</span>, <span class="number">9</span>))</span><br><span class="line">average_price_by_orientation.plot(kind=<span class="string">&#x27;bar&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;不同装修的平均单价&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;装修&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;平均单价&#x27;</span>)</span><br><span class="line">plt.xticks(rotation=<span class="number">0</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/images/01_files/01_26_0.png" alt="png"></p>
<p>可见二手房装修程度和单价并没有实际的联系。</p>
<p>探究二手房朝向和单价的联系：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建折线图</span></span><br><span class="line">plt.figure(figsize=(<span class="number">16</span>, <span class="number">9</span>))</span><br><span class="line">sns.lineplot(x=<span class="string">&#x27;朝向&#x27;</span>, y=<span class="string">&#x27;单价&#x27;</span>, data=data, ci=<span class="literal">None</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;不同朝向的单价趋势&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;朝向&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;单价&#x27;</span>)</span><br><span class="line">plt.xticks(rotation=<span class="number">0</span>)</span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p><img src="/images/01_files/01_29_0.png" alt="png"></p>
<p>发现朝向为北的房价较其他高，猜想朝向为北的特性会使二手房单价较高，结合楼层信息进一步探讨：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用groupby和agg函数来计算朝向和楼层的均值并去掉小数部分</span></span><br><span class="line">mean_data = data.groupby([<span class="string">&#x27;朝向&#x27;</span>, <span class="string">&#x27;楼层&#x27;</span>])[<span class="string">&#x27;单价&#x27;</span>].agg(<span class="string">&#x27;mean&#x27;</span>).reset_index()</span><br><span class="line">mean_data[<span class="string">&#x27;单价&#x27;</span>] = mean_data[<span class="string">&#x27;单价&#x27;</span>].<span class="built_in">round</span>(<span class="number">0</span>)  <span class="comment"># 均值四舍五入为整数</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建柱形图，并设置整体图形大小</span></span><br><span class="line">bar = (</span><br><span class="line">    Bar()</span><br><span class="line">    .add_xaxis(mean_data[<span class="string">&#x27;朝向&#x27;</span>].unique().tolist())</span><br><span class="line">    .add_yaxis(<span class="string">&#x27;低层&#x27;</span>, mean_data[mean_data[<span class="string">&#x27;楼层&#x27;</span>] == <span class="string">&#x27;低层&#x27;</span>][<span class="string">&#x27;单价&#x27;</span>].tolist())</span><br><span class="line">    .add_yaxis(<span class="string">&#x27;中层&#x27;</span>, mean_data[mean_data[<span class="string">&#x27;楼层&#x27;</span>] == <span class="string">&#x27;中层&#x27;</span>][<span class="string">&#x27;单价&#x27;</span>].tolist())</span><br><span class="line">    .add_yaxis(<span class="string">&#x27;高层&#x27;</span>, mean_data[mean_data[<span class="string">&#x27;楼层&#x27;</span>] == <span class="string">&#x27;高层&#x27;</span>][<span class="string">&#x27;单价&#x27;</span>].tolist())</span><br><span class="line">    .set_global_opts(</span><br><span class="line">        title_opts=opts.TitleOpts(title=<span class="string">&quot;单价与朝向关系&quot;</span>),</span><br><span class="line">        graphic_opts=[opts.GraphicGroup(</span><br><span class="line">            graphic_item=opts.GraphicItem(</span><br><span class="line">                left=<span class="string">&quot;10%&quot;</span>,</span><br><span class="line">                top=<span class="string">&quot;center&quot;</span>,</span><br><span class="line">                z=<span class="number">100</span></span><br><span class="line">            ),</span><br><span class="line">            children=[</span><br><span class="line">                opts.GraphicText(</span><br><span class="line">                    graphic_item=opts.GraphicItem(</span><br><span class="line">                        left=<span class="string">&quot;center&quot;</span>,</span><br><span class="line">                        top=<span class="string">&quot;middle&quot;</span>,</span><br><span class="line">                        z=<span class="number">100</span></span><br><span class="line">                    ),</span><br><span class="line">                    </span><br><span class="line">                )</span><br><span class="line">            ]</span><br><span class="line">        )]</span><br><span class="line">    )</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置整体图形的宽度</span></span><br><span class="line">bar.width = <span class="string">&quot;110%&quot;</span></span><br><span class="line">warnings.filterwarnings(<span class="string">&#x27;ignore&#x27;</span>)</span><br><span class="line"></span><br><span class="line">bar.render_notebook()</span><br></pre></td></tr></table></figure>

<p><img src="/images/01_files/suckmy.png" alt="png"></p>
<p>发现北朝向的房子单价较高的原因是低层的价格高，即朝北的二手房的平均单价高是因为朝北的低楼层单价高，而不是因为朝北的二手房单价普遍都高。</p>
<p>同时发现低楼层单价比中高楼层单价高的现象存在不同朝向的二手房中存在较广泛，因此推测低层会导致二手房价格高。</p>
<p>进一步探讨低层对二手房单价的影响：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 按朝向分组并计算平均单价</span></span><br><span class="line">average_price_by_orientation = data.groupby(<span class="string">&#x27;楼层&#x27;</span>)[<span class="string">&#x27;单价&#x27;</span>].mean()</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建柱状图</span></span><br><span class="line">plt.figure(figsize=(<span class="number">16</span>, <span class="number">9</span>))</span><br><span class="line">average_price_by_orientation.plot(kind=<span class="string">&#x27;bar&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;不同楼层的平均单价&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;楼层&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;平均单价&#x27;</span>)</span><br><span class="line">plt.xticks(rotation=<span class="number">0</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/images/01_files/01_33_0.png" alt="png"></p>
<p>发现低楼层的平均单价总体上高于其他楼层</p>
<p>进一步探讨不同区域中，低楼层二手房单价高的特点是否依旧存在：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 使用groupby和agg函数来计算朝向和楼层的均值并去掉小数部分</span></span><br><span class="line">mean_data = data.groupby([<span class="string">&#x27;区域&#x27;</span>, <span class="string">&#x27;楼层&#x27;</span>])[<span class="string">&#x27;单价&#x27;</span>].agg(<span class="string">&#x27;mean&#x27;</span>).reset_index()</span><br><span class="line">mean_data[<span class="string">&#x27;单价&#x27;</span>] = mean_data[<span class="string">&#x27;单价&#x27;</span>].<span class="built_in">round</span>(<span class="number">0</span>)  <span class="comment"># 均值四舍五入为整数</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建柱形图，并设置整体图形大小</span></span><br><span class="line">bar = (</span><br><span class="line">    Bar()</span><br><span class="line">    .add_xaxis(mean_data[<span class="string">&#x27;区域&#x27;</span>].unique().tolist())</span><br><span class="line">    .add_yaxis(<span class="string">&#x27;低层&#x27;</span>, mean_data[mean_data[<span class="string">&#x27;楼层&#x27;</span>] == <span class="string">&#x27;低层&#x27;</span>][<span class="string">&#x27;单价&#x27;</span>].tolist())</span><br><span class="line">    .add_yaxis(<span class="string">&#x27;中层&#x27;</span>, mean_data[mean_data[<span class="string">&#x27;楼层&#x27;</span>] == <span class="string">&#x27;中层&#x27;</span>][<span class="string">&#x27;单价&#x27;</span>].tolist())</span><br><span class="line">    .add_yaxis(<span class="string">&#x27;高层&#x27;</span>, mean_data[mean_data[<span class="string">&#x27;楼层&#x27;</span>] == <span class="string">&#x27;高层&#x27;</span>][<span class="string">&#x27;单价&#x27;</span>].tolist())</span><br><span class="line">    .set_global_opts(</span><br><span class="line">        title_opts=opts.TitleOpts(title=<span class="string">&quot;单价与区域关系&quot;</span>),</span><br><span class="line">        graphic_opts=[opts.GraphicGroup(</span><br><span class="line">            graphic_item=opts.GraphicItem(</span><br><span class="line">                left=<span class="string">&quot;10%&quot;</span>,</span><br><span class="line">                top=<span class="string">&quot;center&quot;</span>,</span><br><span class="line">                z=<span class="number">100</span></span><br><span class="line">            ),</span><br><span class="line">            children=[</span><br><span class="line">                opts.GraphicText(</span><br><span class="line">                    graphic_item=opts.GraphicItem(</span><br><span class="line">                        left=<span class="string">&quot;center&quot;</span>,</span><br><span class="line">                        top=<span class="string">&quot;middle&quot;</span>,</span><br><span class="line">                        z=<span class="number">100</span></span><br><span class="line">                    ),</span><br><span class="line">                    </span><br><span class="line">                )</span><br><span class="line">            ]</span><br><span class="line">        )]</span><br><span class="line">    )</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置整体图形的宽度</span></span><br><span class="line">bar.width = <span class="string">&quot;110%&quot;</span></span><br><span class="line"></span><br><span class="line">bar.render_notebook()</span><br></pre></td></tr></table></figure>

<pre><code>/usr/local/lib/python3.6/site-packages/pyecharts/charts/chart.py:14: PendingDeprecationWarning: pyecharts 所有图表类型将在 v1.9.0 版本开始强制使用 ChartItem 进行数据项配置 :)
  super().__init__(init_opts=init_opts)
</code></pre>
<script>
    require.config({
        paths: {
            'echarts':'https://assets.pyecharts.org/assets/echarts.min'
        }
    });
</script>

<pre><code>    &lt;div id=&quot;a230ac5b03684ffb8db6122bfd0c7ef5&quot; style=&quot;width:110%; height:500px;&quot;&gt;&lt;/div&gt;
</code></pre>
<script>
        require(['echarts'], function(echarts) {
                var chart_a230ac5b03684ffb8db6122bfd0c7ef5 = echarts.init(
                    document.getElementById('a230ac5b03684ffb8db6122bfd0c7ef5'), 'white', {renderer: 'canvas'});
                var option_a230ac5b03684ffb8db6122bfd0c7ef5 = {
    "animation": true,
    "animationThreshold": 2000,
    "animationDuration": 1000,
    "animationEasing": "cubicOut",
    "animationDelay": 0,
    "animationDurationUpdate": 300,
    "animationEasingUpdate": "cubicOut",
    "animationDelayUpdate": 0,
    "color": [
        "#c23531",
        "#2f4554",
        "#61a0a8",
        "#d48265",
        "#749f83",
        "#ca8622",
        "#bda29a",
        "#6e7074",
        "#546570",
        "#c4ccd3",
        "#f05b72",
        "#ef5b9c",
        "#f47920",
        "#905a3d",
        "#fab27b",
        "#2a5caa",
        "#444693",
        "#726930",
        "#b2d235",
        "#6d8346",
        "#ac6767",
        "#1d953f",
        "#6950a1",
        "#918597"
    ],
    "series": [
        {
            "type": "bar",
            "name": "\u4f4e\u5c42",
            "legendHoverLink": true,
            "data": [
                9805.0,
                13803.0,
                11727.0,
                8656.0,
                17070.0,
                9330.0,
                9706.0,
                10637.0,
                11608.0
            ],
            "showBackground": false,
            "barMinHeight": 0,
            "barCategoryGap": "20%",
            "barGap": "30%",
            "large": false,
            "largeThreshold": 400,
            "seriesLayoutBy": "column",
            "datasetIndex": 0,
            "clip": true,
            "zlevel": 0,
            "z": 2,
            "label": {
                "show": true,
                "position": "top",
                "margin": 8
            }
        },
        {
            "type": "bar",
            "name": "\u4e2d\u5c42",
            "legendHoverLink": true,
            "data": [
                9687.0,
                11169.0,
                10055.0,
                7732.0,
                13496.0,
                9128.0,
                9270.0,
                9371.0,
                10638.0
            ],
            "showBackground": false,
            "barMinHeight": 0,
            "barCategoryGap": "20%",
            "barGap": "30%",
            "large": false,
            "largeThreshold": 400,
            "seriesLayoutBy": "column",
            "datasetIndex": 0,
            "clip": true,
            "zlevel": 0,
            "z": 2,
            "label": {
                "show": true,
                "position": "top",
                "margin": 8
            }
        },
        {
            "type": "bar",
            "name": "\u9ad8\u5c42",
            "legendHoverLink": true,
            "data": [
                9538.0,
                12225.0,
                10488.0,
                8279.0,
                13564.0,
                9104.0,
                9273.0,
                9467.0,
                10904.0
            ],
            "showBackground": false,
            "barMinHeight": 0,
            "barCategoryGap": "20%",
            "barGap": "30%",
            "large": false,
            "largeThreshold": 400,
            "seriesLayoutBy": "column",
            "datasetIndex": 0,
            "clip": true,
            "zlevel": 0,
            "z": 2,
            "label": {
                "show": true,
                "position": "top",
                "margin": 8
            }
        }
    ],
    "legend": [
        {
            "data": [
                "\u4f4e\u5c42",
                "\u4e2d\u5c42",
                "\u9ad8\u5c42"
            ],
            "selected": {
                "\u4f4e\u5c42": true,
                "\u4e2d\u5c42": true,
                "\u9ad8\u5c42": true
            },
            "show": true,
            "padding": 5,
            "itemGap": 10,
            "itemWidth": 25,
            "itemHeight": 14
        }
    ],
    "tooltip": {
        "show": true,
        "trigger": "item",
        "triggerOn": "mousemove|click",
        "axisPointer": {
            "type": "line"
        },
        "showContent": true,
        "alwaysShowContent": false,
        "showDelay": 0,
        "hideDelay": 100,
        "textStyle": {
            "fontSize": 14
        },
        "borderWidth": 0,
        "padding": 5
    },
    "xAxis": [
        {
            "show": true,
            "scale": false,
            "nameLocation": "end",
            "nameGap": 15,
            "gridIndex": 0,
            "inverse": false,
            "offset": 0,
            "splitNumber": 5,
            "minInterval": 0,
            "splitLine": {
                "show": false,
                "lineStyle": {
                    "show": true,
                    "width": 1,
                    "opacity": 1,
                    "curveness": 0,
                    "type": "solid"
                }
            },
            "data": [
                "\u4e8c\u9053",
                "\u51c0\u6708",
                "\u5357\u5173",
                "\u5bbd\u57ce",
                "\u671d\u9633",
                "\u6c7d\u5f00",
                "\u7ecf\u5f00",
                "\u7eff\u56ed",
                "\u9ad8\u65b0"
            ]
        }
    ],
    "yAxis": [
        {
            "show": true,
            "scale": false,
            "nameLocation": "end",
            "nameGap": 15,
            "gridIndex": 0,
            "inverse": false,
            "offset": 0,
            "splitNumber": 5,
            "minInterval": 0,
            "splitLine": {
                "show": false,
                "lineStyle": {
                    "show": true,
                    "width": 1,
                    "opacity": 1,
                    "curveness": 0,
                    "type": "solid"
                }
            }
        }
    ],
    "title": [
        {
            "text": "\u5355\u4ef7\u4e0e\u533a\u57df\u5173\u7cfb",
            "padding": 5,
            "itemGap": 10
        }
    ],
    "graphic": [
        {
            "type": "group",
            "diffChildrenByName": false,
            "children": [
                {
                    "type": "text",
                    "$action": "merge",
                    "rotation": 0,
                    "left": "center",
                    "top": "middle",
                    "bounding": "all",
                    "z": 100,
                    "zlevel": 0,
                    "silent": false,
                    "invisible": false,
                    "ignore": false,
                    "cursor": "pointer",
                    "draggable": false,
                    "progressive": false,
                    "width": 0,
                    "height": 0
                }
            ],
            "$action": "merge",
            "rotation": 0,
            "left": "10%",
            "top": "center",
            "bounding": "all",
            "z": 100,
            "zlevel": 0,
            "silent": false,
            "invisible": false,
            "ignore": false,
            "cursor": "pointer",
            "draggable": false,
            "progressive": false,
            "width": 0,
            "height": 0
        }
    ]
};
                chart_a230ac5b03684ffb8db6122bfd0c7ef5.setOption(option_a230ac5b03684ffb8db6122bfd0c7ef5);
        });
    </script>




<p>可见，即使考虑区域对单价的影响，低楼层二手房单价高的现象依旧普遍存在</p>
<div id="3.3"></div>

<h2 id="3-3-低楼层二手房的特别之处及其单价高的原因"><a href="#3-3-低楼层二手房的特别之处及其单价高的原因" class="headerlink" title="3.3 低楼层二手房的特别之处及其单价高的原因"></a>3.3 低楼层二手房的特别之处及其单价高的原因</h2><p>探究低楼层二手房房间数量的特点</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 创建柱状图</span></span><br><span class="line">plt.figure(figsize=(<span class="number">16</span>, <span class="number">9</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 显示标准差的误差线</span></span><br><span class="line">sns.barplot(data=data, x=<span class="string">&#x27;楼层&#x27;</span>, y=<span class="string">&#x27;总房间数量&#x27;</span>, ci=<span class="string">&#x27;sd&#x27;</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;不同楼层的总房间数量&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;楼层&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;平均总房间数量&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>


<p><img src="/images/01_files/01_40_0.png" alt="png"></p>
<p>低楼层二手房的平均房间数量最多，且拥有所有楼层中房间数量最多的二手房。</p>
<p>探究低楼层二手房间建筑面积的特点</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置图形大小</span></span><br><span class="line">plt.figure(figsize=(<span class="number">32</span>,<span class="number">9</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建子图</span></span><br><span class="line">plt.subplot(<span class="number">1</span>, <span class="number">2</span>, <span class="number">1</span>)</span><br><span class="line">plt.title(<span class="string">&#x27;散点图与回归线（楼层）&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用seaborn的scatterplot函数画散点图</span></span><br><span class="line">sns.scatterplot(x=<span class="string">&#x27;总价&#x27;</span>, y=<span class="string">&#x27;建筑面积&#x27;</span>, hue=<span class="string">&#x27;楼层&#x27;</span>, data=data, palette=<span class="string">&#x27;Set1&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;总价&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;建筑面积（平方米）&#x27;</span>)</span><br><span class="line">plt.legend(title=<span class="string">&#x27;楼层&#x27;</span>)</span><br></pre></td></tr></table></figure>




<pre><code>&lt;matplotlib.legend.Legend at 0x7f8ab50fa080&gt;
</code></pre>
<p><img src="/images/01_files/01_43_1.png" alt="png"></p>
<p>由图得：</p>
<ol>
<li><p>低层二手房的建筑面积在群体中偏高.</p>
</li>
<li><p>低层二手房的总价在群体中都偏高。</p>
</li>
<li><p>低楼层的二手房的建筑面积在群体中相差最大。</p>
</li>
</ol>
<p>探究低楼层二手房装修程度的特点：</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 设置图形大小</span></span><br><span class="line">plt.figure(figsize=(<span class="number">24</span>, <span class="number">8</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment"># 创建数据透视表时重新排列坐标轴的顺序</span></span><br><span class="line">heatmap_data = data.pivot_table(index=<span class="string">&#x27;楼层&#x27;</span>, columns=<span class="string">&#x27;装修&#x27;</span>, values=<span class="string">&#x27;总价&#x27;</span>, aggfunc=<span class="string">&#x27;mean&#x27;</span>).T</span><br><span class="line"></span><br><span class="line"><span class="comment"># 使用seaborn的heatmap函数画热力图</span></span><br><span class="line">sns.heatmap(heatmap_data, annot=<span class="literal">True</span>, fmt=<span class="string">&quot;.0f&quot;</span>, cmap=<span class="string">&quot;YlGnBu&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 设置图形标题和坐标轴标签</span></span><br><span class="line">plt.title(<span class="string">&#x27;楼层与装修的总价热力图&#x27;</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;楼层&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;装修&#x27;</span>)</span><br><span class="line"></span><br><span class="line">plt.show()</span><br><span class="line"></span><br></pre></td></tr></table></figure>


<p><img src="/images/01_files/01_46_0.png" alt="png"></p>
<p>可见这类低楼层且总价高的二手房多是豪华装修或毛坯</p>
<div id="4"></div>

<h1 id="4-训练集测试集划分"><a href="#4-训练集测试集划分" class="headerlink" title="4. 训练集测试集划分"></a>4. 训练集测试集划分</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 导入所需的库</span></span><br><span class="line"><span class="keyword">from</span> sklearn.model_selection <span class="keyword">import</span> train_test_split</span><br><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> LinearRegression</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> mean_squared_error, r2_score</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment"># 1. 划分训练集与测试集</span></span><br><span class="line">X = data[[<span class="string">&#x27;建筑面积&#x27;</span>, <span class="string">&#x27;卧室数量&#x27;</span>, <span class="string">&#x27;客厅数量&#x27;</span>, <span class="string">&#x27;卫生间数量&#x27;</span>, <span class="string">&#x27;总房间数量&#x27;</span>]]  <span class="comment"># 特征变量</span></span><br><span class="line">y = data[<span class="string">&#x27;总价&#x27;</span>]  <span class="comment"># 目标变量</span></span><br><span class="line"></span><br><span class="line">X_train, X_test, y_train, y_test = train_test_split(X, y, test_size=<span class="number">0.2</span>, random_state=<span class="number">42</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<div id="5"></div>

<h1 id="5-计算训练集中各特征变量与目标变量之间的相关性"><a href="#5-计算训练集中各特征变量与目标变量之间的相关性" class="headerlink" title="5. 计算训练集中各特征变量与目标变量之间的相关性"></a>5. 计算训练集中各特征变量与目标变量之间的相关性</h1><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">correlation = X_train.corrwith(y_train)</span><br></pre></td></tr></table></figure>

<div id="6"></div>

<h1 id="6-线性回归预测方法"><a href="#6-线性回归预测方法" class="headerlink" title="6. 线性回归预测方法"></a>6. 线性回归预测方法</h1><div id="6.1"></div>

<h2 id="6-1-训练模型"><a href="#6-1-训练模型" class="headerlink" title="6.1 训练模型"></a>6.1 训练模型</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">model = LinearRegression()</span><br><span class="line">model.fit(X_train, y_train)</span><br></pre></td></tr></table></figure>




<pre><code>LinearRegression()
</code></pre>
<div id="6.2"></div>

<h2 id="6-2-评估模型"><a href="#6-2-评估模型" class="headerlink" title="6.2 评估模型"></a>6.2 评估模型</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">y_pred = model.predict(X_test)</span><br><span class="line">mse = mean_squared_error(y_test, y_pred)</span><br><span class="line">r2 = r2_score(y_test, y_pred)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;均方误差 (MSE):&quot;</span>, mse)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;确定系数 (R^2):&quot;</span>, r2)</span><br></pre></td></tr></table></figure>

<pre><code>均方误差 (MSE): 174736164917.77014
确定系数 (R^2): 0.7219431985439011
</code></pre>
<div id="6.3"></div>
 
<h2 id="6-3-用新的数据来预测输出"><a href="#6-3-用新的数据来预测输出" class="headerlink" title="6.3 用新的数据来预测输出"></a>6.3 用新的数据来预测输出</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">new_data = [[<span class="number">100</span>, <span class="number">2</span>, <span class="number">1</span>, <span class="number">1</span>, <span class="number">4</span>]]  <span class="comment"># 以建筑面积、卧室数量、客厅数量、卫生间数量、总房间数量为例</span></span><br><span class="line">predicted_price = model.predict(new_data)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;预测的房价为:&quot;</span>, predicted_price)</span><br></pre></td></tr></table></figure>

<pre><code>预测的房价为: [1063683.98836433]
</code></pre>
<div id="7"></div>

<h1 id="7-套索回归预测方法"><a href="#7-套索回归预测方法" class="headerlink" title="7. 套索回归预测方法"></a>7. 套索回归预测方法</h1><div id="7.1"></div>

<h2 id="7-1-对特征值进行标准化"><a href="#7-1-对特征值进行标准化" class="headerlink" title="7.1 对特征值进行标准化"></a>7.1 对特征值进行标准化</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> StandardScaler</span><br><span class="line"></span><br><span class="line">scaler = StandardScaler()</span><br><span class="line">X_train_scaled = scaler.fit_transform(X_train)</span><br><span class="line">X_test_scaled = scaler.transform(X_test)</span><br></pre></td></tr></table></figure>

<div id="7.2"></div>

<h2 id="7-2-训练模型"><a href="#7-2-训练模型" class="headerlink" title="7.2 训练模型"></a>7.2 训练模型</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> Ridge</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> mean_squared_error, r2_score</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用训练集训练岭线性回归模型</span></span><br><span class="line">ridge_model = Ridge(alpha=<span class="number">0.5</span>)</span><br><span class="line">ridge_model.fit(X_train_scaled, y_train)</span><br></pre></td></tr></table></figure>




<pre><code>Ridge(alpha=0.5)
</code></pre>
<div id="7.3"></div>

<h2 id="7-3-评估模型"><a href="#7-3-评估模型" class="headerlink" title="7.3 评估模型"></a>7.3 评估模型</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 模型在训练集上的评估</span></span><br><span class="line">train_predictions = ridge_model.predict(X_train_scaled)</span><br><span class="line">train_mse = mean_squared_error(y_train, train_predictions)</span><br><span class="line">train_r2 = r2_score(y_train, train_predictions)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 模型在测试集上的评估</span></span><br><span class="line">test_predictions = ridge_model.predict(X_test_scaled)</span><br><span class="line">test_mse = mean_squared_error(y_test, test_predictions)</span><br><span class="line">test_r2 = r2_score(y_test, test_predictions)</span><br><span class="line"></span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;训练集均方误差：<span class="subst">&#123;train_mse&#125;</span>, 训练集判定系数：<span class="subst">&#123;train_r2&#125;</span>&quot;</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">f&quot;测试集均方误差：<span class="subst">&#123;test_mse&#125;</span>, 测试集判定系数：<span class="subst">&#123;test_r2&#125;</span>&quot;</span>)</span><br></pre></td></tr></table></figure>

<pre><code>训练集均方误差：201768495354.7439, 训练集判定系数：0.7268118347932939
测试集均方误差：174743737321.07077, 测试集判定系数：0.7219311486157016
</code></pre>
<div id="7.4"></div>

<h2 id="7-4-用新的数据来预测输出"><a href="#7-4-用新的数据来预测输出" class="headerlink" title="7.4 用新的数据来预测输出"></a>7.4 用新的数据来预测输出</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">new_data_scaled = scaler.transform(new_data)</span><br><span class="line"></span><br><span class="line">predicted_price_ridge = ridge_model.predict(new_data_scaled)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;套索回归预测的房价为:&quot;</span>, predicted_price_ridge)</span><br></pre></td></tr></table></figure>

<pre><code>套索回归预测的房价为: [1063420.6112017]
</code></pre>
<div id="8"></div>

<h1 id="8-岭回归预测方法"><a href="#8-岭回归预测方法" class="headerlink" title="8. 岭回归预测方法"></a>8. 岭回归预测方法</h1><div id="8.1"></div>

<h2 id="8-1-对特征值进行标准化"><a href="#8-1-对特征值进行标准化" class="headerlink" title="8.1 对特征值进行标准化"></a>8.1 对特征值进行标准化</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.preprocessing <span class="keyword">import</span> StandardScaler</span><br><span class="line"></span><br><span class="line">scaler = StandardScaler()</span><br><span class="line">X_train_scaled = scaler.fit_transform(X_train)</span><br><span class="line">X_test_scaled = scaler.transform(X_test)</span><br></pre></td></tr></table></figure>

<div id="8.3"></div>

<h2 id="8-2-训练模型"><a href="#8-2-训练模型" class="headerlink" title="8.2 训练模型"></a>8.2 训练模型</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> sklearn.linear_model <span class="keyword">import</span> Lasso</span><br><span class="line"><span class="keyword">from</span> sklearn.metrics <span class="keyword">import</span> mean_squared_error, r2_score</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用训练集训练套索线性回归模型</span></span><br><span class="line">lasso_reg = Lasso(alpha=<span class="number">0.8</span>)</span><br><span class="line">lasso_reg.fit(X_train_scaled, y_train)</span><br></pre></td></tr></table></figure>

<pre><code>/usr/local/lib/python3.6/site-packages/sklearn/linear_model/_coordinate_descent.py:532: ConvergenceWarning: Objective did not converge. You might want to increase the number of iterations. Duality gap: 39353061284373.59, tolerance: 149486502934.3434
  positive)





Lasso(alpha=0.8)
</code></pre>
<div id="8.2"></div>

<h2 id="8-3-评估模型"><a href="#8-3-评估模型" class="headerlink" title="8.3 评估模型"></a>8.3 评估模型</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 预测</span></span><br><span class="line">y_train_pred = lasso_reg.predict(X_train_scaled)</span><br><span class="line">y_test_pred = lasso_reg.predict(X_test_scaled)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 计算模型在训练集上的均方误差和判定系数</span></span><br><span class="line">train_mse = mean_squared_error(y_train, y_train_pred)</span><br><span class="line">train_r2 = r2_score(y_train, y_train_pred)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 计算模型在测试集上的均方误差和判定系数</span></span><br><span class="line">test_mse = mean_squared_error(y_test, y_test_pred)</span><br><span class="line">test_r2 = r2_score(y_test, y_test_pred)</span><br><span class="line"></span><br><span class="line">(train_mse, train_r2), (test_mse, test_r2)</span><br></pre></td></tr></table></figure>




<pre><code>((201768409371.07004, 0.7268119512124704),
 (174736295747.52533, 0.721942990355154))
</code></pre>
<div id="8.4"></div>

<h2 id="8-4-用新的数据来预测输出"><a href="#8-4-用新的数据来预测输出" class="headerlink" title="8.4 用新的数据来预测输出"></a>8.4 用新的数据来预测输出</h2><figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 对新数据进行标准化</span></span><br><span class="line">new_data_scaled = scaler.transform(new_data)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 用训练好的套索线性回归模型进行预测</span></span><br><span class="line">predicted_price_lasso = lasso_reg.predict(new_data_scaled)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;套索线性回归 - 预测的房价为:&quot;</span>, predicted_price_lasso)</span><br></pre></td></tr></table></figure>

<pre><code>套索线性回归 - 预测的房价为: [1063682.18589889]
</code></pre>
<div id="9"></div>

<h1 id="9-总结"><a href="#9-总结" class="headerlink" title="9. 总结"></a>9. 总结</h1><p>我针对二手房相关特征进行了数据读取、预处理和可视化。经过数据预处理过程，我清理了空值和重复值，并进行了数据类型转换与提取新特征。通过数据可视化，我探索了二手房的特征分布情况，以及不同因素对二手房单价的可能影响。发现朝向、楼层和装修等因素对二手房单价有一定程度的影响。此外，我还进行了训练集与测试集的划分，并使用线性回归、套索回归和岭回归进行预测模型的构建与评估。基于模型结果，我们可以用建筑面积、卧室数量、客厅数量、卫生间数量、总房间数量这五个因素进行二手房价格的预测。最后，综合分析了不同因素对二手房价格的影响，以及低楼层房价高的原因，进一步展示了其中的规律性。</p>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta"><i class="fas fa-circle-user fa-fw"></i>Author: </span><span class="post-copyright-info"><a href="http://example.com">Kangrui Yu</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta"><i class="fas fa-square-arrow-up-right fa-fw"></i>Link: </span><span class="post-copyright-info"><a href="http://example.com/2024/10/02/%E4%BA%8C%E6%89%8B%E6%88%BF%E4%BB%B7%E6%A0%BC%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E4%B8%8E%E9%A2%84%E6%B5%8B/">http://example.com/2024/10/02/%E4%BA%8C%E6%89%8B%E6%88%BF%E4%BB%B7%E6%A0%BC%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E4%B8%8E%E9%A2%84%E6%B5%8B/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta"><i class="fas fa-circle-exclamation fa-fw"></i>Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90/">数据分析</a><a class="post-meta__tags" href="/tags/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0/">机器学习</a><a class="post-meta__tags" href="/tags/Python/">Python</a></div><div class="post_share"><div class="social-share" data-image="/img/avatar.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2024/03/14/hello-world/" title="Hello World"><div class="cover" style="background: var(--default-bg-color)"></div><div class="pagination-info"><div class="label">Next</div><div class="next_info">Hello World</div></div></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/avatar.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Kangrui Yu</div><div class="author-info__description"></div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">Articles</div><div class="length-num">2</div></a><a href="/tags/"><div class="headline">Tags</div><div class="length-num">3</div></a><a href="/categories/"><div class="headline">Categories</div><div class="length-num">1</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/Erik-Magneto"><i class="fab fa-github"></i><span>Follow Me</span></a></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>Announcement</span></div><div class="announcement_content">This is my Blog</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>Contents</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E4%BA%8C%E6%89%8B%E6%88%BF%E4%BB%B7%E6%A0%BC%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E4%B8%8E%E9%A2%84%E6%B5%8B"><span class="toc-number">1.</span> <span class="toc-text">二手房价格数据分析与预测</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%9B%AE%E5%BD%95"><span class="toc-number">1.1.</span> <span class="toc-text">目录</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#1-%E6%95%B0%E6%8D%AE%E8%AF%BB%E5%8F%96%E4%B8%8E%E6%9F%A5%E7%9C%8B"><span class="toc-number">2.</span> <span class="toc-text">1. 数据读取与查看</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#2-%E6%95%B0%E6%8D%AE%E9%A2%84%E5%A4%84%E7%90%86"><span class="toc-number">3.</span> <span class="toc-text">2. 数据预处理</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#3-%E6%95%B0%E6%8D%AE%E5%8F%AF%E8%A7%86%E5%8C%96"><span class="toc-number">4.</span> <span class="toc-text">3. 数据可视化</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#3-1-%E7%89%B9%E5%BE%81%E5%88%86%E5%B8%83%E5%8F%AF%E8%A7%86%E5%8C%96"><span class="toc-number">4.1.</span> <span class="toc-text">3.1 特征分布可视化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-2-%E4%BA%8C%E6%89%8B%E6%88%BF%E5%8D%95%E4%BB%B7%E5%8F%AF%E8%83%BD%E7%9A%84%E5%BD%B1%E5%93%8D%E5%9B%A0%E7%B4%A0"><span class="toc-number">4.2.</span> <span class="toc-text">3.2 二手房单价可能的影响因素</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#3-3-%E4%BD%8E%E6%A5%BC%E5%B1%82%E4%BA%8C%E6%89%8B%E6%88%BF%E7%9A%84%E7%89%B9%E5%88%AB%E4%B9%8B%E5%A4%84%E5%8F%8A%E5%85%B6%E5%8D%95%E4%BB%B7%E9%AB%98%E7%9A%84%E5%8E%9F%E5%9B%A0"><span class="toc-number">4.3.</span> <span class="toc-text">3.3 低楼层二手房的特别之处及其单价高的原因</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#4-%E8%AE%AD%E7%BB%83%E9%9B%86%E6%B5%8B%E8%AF%95%E9%9B%86%E5%88%92%E5%88%86"><span class="toc-number">5.</span> <span class="toc-text">4. 训练集测试集划分</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#5-%E8%AE%A1%E7%AE%97%E8%AE%AD%E7%BB%83%E9%9B%86%E4%B8%AD%E5%90%84%E7%89%B9%E5%BE%81%E5%8F%98%E9%87%8F%E4%B8%8E%E7%9B%AE%E6%A0%87%E5%8F%98%E9%87%8F%E4%B9%8B%E9%97%B4%E7%9A%84%E7%9B%B8%E5%85%B3%E6%80%A7"><span class="toc-number">6.</span> <span class="toc-text">5. 计算训练集中各特征变量与目标变量之间的相关性</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#6-%E7%BA%BF%E6%80%A7%E5%9B%9E%E5%BD%92%E9%A2%84%E6%B5%8B%E6%96%B9%E6%B3%95"><span class="toc-number">7.</span> <span class="toc-text">6. 线性回归预测方法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#6-1-%E8%AE%AD%E7%BB%83%E6%A8%A1%E5%9E%8B"><span class="toc-number">7.1.</span> <span class="toc-text">6.1 训练模型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-2-%E8%AF%84%E4%BC%B0%E6%A8%A1%E5%9E%8B"><span class="toc-number">7.2.</span> <span class="toc-text">6.2 评估模型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#6-3-%E7%94%A8%E6%96%B0%E7%9A%84%E6%95%B0%E6%8D%AE%E6%9D%A5%E9%A2%84%E6%B5%8B%E8%BE%93%E5%87%BA"><span class="toc-number">7.3.</span> <span class="toc-text">6.3 用新的数据来预测输出</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#7-%E5%A5%97%E7%B4%A2%E5%9B%9E%E5%BD%92%E9%A2%84%E6%B5%8B%E6%96%B9%E6%B3%95"><span class="toc-number">8.</span> <span class="toc-text">7. 套索回归预测方法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#7-1-%E5%AF%B9%E7%89%B9%E5%BE%81%E5%80%BC%E8%BF%9B%E8%A1%8C%E6%A0%87%E5%87%86%E5%8C%96"><span class="toc-number">8.1.</span> <span class="toc-text">7.1 对特征值进行标准化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-2-%E8%AE%AD%E7%BB%83%E6%A8%A1%E5%9E%8B"><span class="toc-number">8.2.</span> <span class="toc-text">7.2 训练模型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-3-%E8%AF%84%E4%BC%B0%E6%A8%A1%E5%9E%8B"><span class="toc-number">8.3.</span> <span class="toc-text">7.3 评估模型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#7-4-%E7%94%A8%E6%96%B0%E7%9A%84%E6%95%B0%E6%8D%AE%E6%9D%A5%E9%A2%84%E6%B5%8B%E8%BE%93%E5%87%BA"><span class="toc-number">8.4.</span> <span class="toc-text">7.4 用新的数据来预测输出</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#8-%E5%B2%AD%E5%9B%9E%E5%BD%92%E9%A2%84%E6%B5%8B%E6%96%B9%E6%B3%95"><span class="toc-number">9.</span> <span class="toc-text">8. 岭回归预测方法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#8-1-%E5%AF%B9%E7%89%B9%E5%BE%81%E5%80%BC%E8%BF%9B%E8%A1%8C%E6%A0%87%E5%87%86%E5%8C%96"><span class="toc-number">9.1.</span> <span class="toc-text">8.1 对特征值进行标准化</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-2-%E8%AE%AD%E7%BB%83%E6%A8%A1%E5%9E%8B"><span class="toc-number">9.2.</span> <span class="toc-text">8.2 训练模型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-3-%E8%AF%84%E4%BC%B0%E6%A8%A1%E5%9E%8B"><span class="toc-number">9.3.</span> <span class="toc-text">8.3 评估模型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#8-4-%E7%94%A8%E6%96%B0%E7%9A%84%E6%95%B0%E6%8D%AE%E6%9D%A5%E9%A2%84%E6%B5%8B%E8%BE%93%E5%87%BA"><span class="toc-number">9.4.</span> <span class="toc-text">8.4 用新的数据来预测输出</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#9-%E6%80%BB%E7%BB%93"><span class="toc-number">10.</span> <span class="toc-text">9. 总结</span></a></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>Recent Post</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/10/02/%E4%BA%8C%E6%89%8B%E6%88%BF%E4%BB%B7%E6%A0%BC%E6%95%B0%E6%8D%AE%E5%88%86%E6%9E%90%E4%B8%8E%E9%A2%84%E6%B5%8B/" title="二手房价格数据分析与预测">二手房价格数据分析与预测</a><time datetime="2024-10-01T16:00:00.000Z" title="Created 2024-10-02 00:00:00">2024-10-02</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2024/03/14/hello-world/" title="Hello World">Hello World</a><time datetime="2024-03-14T02:56:19.121Z" title="Created 2024-03-14 10:56:19">2024-03-14</time></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2024 By Kangrui Yu</div><div class="framework-info"><span>Framework </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>Theme </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="Read Mode"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="Toggle Between Light And Dark Mode"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="Toggle between Single-column and Double-column"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="Setting"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="Table Of Contents"><i class="fas fa-list-ul"></i></button><button id="go-up" type="button" title="Back To Top"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js?v=4.13.0"></script><script src="/js/main.js?v=4.13.0"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui@5.0.33/dist/fancybox/fancybox.umd.min.js"></script><div class="js-pjax"></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>